# üöö "Resoluci√≥n del Problema de Rutas Vehiculares con Ventanas de Tiempo Mediante un Algoritmo H√≠brido Entre Colonia de Hormigas y Recocido Simulado."

Este proyecto implementa una soluci√≥n h√≠brida para el Problema de Rutas de Veh√≠culos con Ventanas de Tiempo (VRPTW), combinando el algoritmo de Optimizaci√≥n por Colonias de Hormigas (**ACO**) con Recocido Simulado (**SA**) como refinador local, y ajustando autom√°ticamente sus par√°metros mediante un Algoritmo Evolutivo Diferencial (**DE**).

---

## üß© ¬øQu√© es el VRPTW?

El Problema de Rutas de Veh√≠culos con Ventanas de Tiempo (VRPTW, por sus siglas en ingl√©s _Vehicle Routing Problem with Time Windows_) es una extensi√≥n del Problema de Rutas de Veh√≠culos (_VRP_) cl√°sico que a√±ade restricciones temporales.

Consiste en encontrar las rutas √≥ptimas para una flota de veh√≠culos que deben visitar un conjunto de clientes dentro de intervalos de tiempo espec√≠ficos (ventanas de tiempo), considerando tambi√©n restricciones de capacidad de carga y la demanda de cada cliente, con el objetivo de minimizar la distancia total recorrida.

---

## üïí Restricciones de Ventanas de Tiempo

Cada cliente debe ser visitado dentro de una ventana de tiempo espec√≠fica:

- **Tiempo m√°s temprano** (earliest time): El veh√≠culo no puede comenzar el servicio antes de este tiempo.
- **Tiempo m√°s tard√≠o** (latest time): El veh√≠culo debe comenzar el servicio a m√°s tardar en este tiempo.

Si un veh√≠culo llega antes del tiempo m√°s temprano, debe esperar. Si no puede llegar antes del tiempo m√°s tard√≠o, la soluci√≥n no es factible.

---

## üêú ¬øQu√© es ACO (Ant Colony Optimization)?

ACO (Ant Colony Optimization) es una metaheur√≠stica inspirada en el comportamiento colectivo de las colonias de hormigas.

En la naturaleza, las hormigas encuentran caminos cortos entre su nido y las fuentes de comida dejando feromona. Cuanto mejor sea el camino (m√°s corto), m√°s feromona se acumulan, y m√°s probable es que otras hormigas lo sigan, reforzando as√≠ la soluci√≥n.

En el VRPTW, simulamos este comportamiento:

- Cada "hormiga" construye una soluci√≥n recorriendo clientes.
- Las decisiones se toman con base en:
  - **Cantidad de feromona** (lo aprendido)
  - **Visibilidad** (inverso de la distancia)
  - **Factibilidad temporal** (ventanas de tiempo)
- Despu√©s de cada iteraci√≥n, se actualizan las feromonas, favoreciendo los caminos m√°s cortos y temporalmente viables.
- Se respetan las **restricciones de capacidad y tiempo** de cada veh√≠culo.

## üî• ¬øQu√© es el Recocido Simulado (SA)?

El Recocido Simulado (_Simulated Annealing_, SA) es una metaheur√≠stica inspirada en el proceso metal√∫rgico de recocido, donde un metal se calienta y luego se enfr√≠a de forma controlada para modificar sus propiedades f√≠sicas.

En optimizaci√≥n:

- Inicialmente, **acepta soluciones peores con alta probabilidad** (cuando la temperatura es alta).
- Gradualmente, **se vuelve m√°s selectivo** a medida que la temperatura disminuye (_enfriamiento_).
- Este enfoque permite escapar de √≥ptimos locales y explorar ampliamente el espacio de soluciones.

üîß En nuestro sistema, **SA toma las rutas generadas por ACO y las refina** mediante peque√±as modificaciones, aceptando temporalmente algunas soluciones sub√≥ptimas para potencialmente encontrar mejores soluciones globales.

---

### ‚öôÔ∏è Descripci√≥n de Operadores Utilizados en el Recocido Simulado (SA)

Este algoritmo aplica distintos operadores de vecindad para explorar nuevas soluciones del problema de ruteo de veh√≠culos (VRP_TW). A continuaci√≥n, se describen los operadores utilizados:

### Operador 1: `opt_2`
- **Descripci√≥n:** Elimina dos aristas y reconecta las rutas invirtiendo el segmento intermedio.
- **Ejemplo:**  
  Ruta: `[0, 2, 4, 5, 3, 1, 0]`  
  ‚Üí Elimina `(4-5)` y `(3-1)`  
  ‚Üí Resultado: `[0, 2, 4, 3, 5, 1, 0]`



### Operador 2: `or_opt`
- **Descripci√≥n:** Mueve uno o m√°s clientes consecutivos a otra posici√≥n en la misma o en otra ruta.
- **Ejemplo:**  
  De: `[1, 3, 4, 5]`  
  Mueve `[3,4]` detr√°s de 5 ‚Üí `[1, 5, 3, 4]`



### Operador 3: `swap_intra`
- **Descripci√≥n:** Intercambia dos clientes dentro de la misma ruta.
- **Ejemplo:**  
  `[0, 1, 2, 3, 0]` ‚Üí Intercambia 1 y 3 ‚Üí `[0, 3, 2, 1, 0]`



### Operador 4: `swap_inter`
- **Descripci√≥n:** Intercambia clientes entre dos rutas distintas.
- **Ejemplo:**  
  Ruta 1: `[0, 2, 4, 0]`  
  Ruta 2: `[0, 3, 5, 0]`  
  Intercambia 4 y 5 ‚Üí  
  Ruta 1: `[0, 2, 5, 0]`  
  Ruta 2: `[0, 3, 4, 0]`


### Operador 5: `reinsercion_intra_inter`
- **Descripci√≥n:** Reubica un cliente en otra posici√≥n dentro de la misma ruta o en otra.
- **Ejemplo:**  
  Ruta 1: `[0, 1, 4, 0]`  
  Ruta 2: `[0, 2, 3, 0]`  
  Mueve 4 a Ruta 2 ‚Üí  
  Ruta 1: `[0, 1, 0]`  
  Ruta 2: `[0, 2, 3, 4, 0]`


### Operador 6: `opt_2_5`
- **Descripci√≥n:** Variante extendida del 2-opt que permite m√∫ltiples cortes y reconexiones.
- **Ejemplo:**  
  `[0, 1, 2, 3, 4, 0]` ‚Üí `[0, 1, 4, 3, 2, 0]`


### Operador 7: `cross_exchange`
- **Descripci√≥n:** Intercambia subsecuencias entre dos rutas.
- **Ejemplo:**  
  Ruta 1: `[0, 1, 2, 0]`  
  Ruta 2: `[0, 3, 4, 0]`  
  Intercambia `[1,2]` con `[3,4]` ‚Üí  
  Ruta 1: `[0, 3, 4, 0]`  
  Ruta 2: `[0, 1, 2, 0]`


### Operador 8: `relocate_chain`
- **Descripci√≥n:** Mueve una cadena de clientes (por ejemplo: `[2,3,4]`) a otra posici√≥n.
- **Ejemplo:**  
  Ruta 1: `[0, 1, 2, 3, 4, 0]`  
  Ruta 2: `[0, 5, 6, 0]`  
  Mueve `[2,3,4]` a Ruta 2 ‚Üí  
  Ruta 1: `[0, 1, 0]`  
  Ruta 2: `[0, 5, 6, 2, 3, 4, 0]`


### Observaciones
- Los operadores **1, 2, 3 y 6** son **intra-ruta** (act√∫an dentro de una sola ruta).
- Los operadores **4, 5, 7 y 8** son **inter-ruta** (act√∫an entre distintas rutas).
- La elecci√≥n del operador se adapta din√°micamente seg√∫n:
  - Tama√±o de la instancia (`num_clientes`)
  - N√∫mero de veh√≠culos en la soluci√≥n actual

---

## üß¨ ¬øQu√© es el Algoritmo Evolutivo Diferencial (DE)?

DE es una t√©cnica de optimizaci√≥n basada en poblaciones. Ideal para problemas continuos y para ajustar par√°metros autom√°ticamente.

üìå Se basa en tres operadores:

- **Mutaci√≥n**: Combinaci√≥n de soluciones existentes para generar un vector perturbado.

- **Cruzamiento (recombinaci√≥n)**: Mezcla del individuo mutado con el original.
- **Selecci√≥n**: Se elige entre el original y el mutado, conservando el que tenga mejor desempe√±o.

En este proyecto, **DE ajusta autom√°ticamente los par√°metros de ACO** (como Œ±, Œ≤, œÅ, n√∫mero de hormigas, etc.) para minimizar la distancia total recorrida por los veh√≠culos.

---

## üß† ¬øC√≥mo se resolvi√≥ el VRPTW?

El enfoque fue **h√≠brido**, utilizando tres algoritmos colaborativos:

- **ACO** construye rutas factibles para una flota de veh√≠culos.
- **SA** refina las rutas generadas por ACO.
- **DE** ajusta autom√°ticamente los par√°metros de ambos algoritmos para mejorar el rendimiento global.

---

## ‚öôÔ∏è Rango de Par√°metros Adaptativos seg√∫n el Tama√±o del Problema

Para lograr una **mejor calibraci√≥n** de los algoritmos ACO (Ant Colony Optimization) y SA (Simulated Annealing), se definieron **rangos de par√°metros adaptativos** en funci√≥n del n√∫mero de clientes en la instancia del VRPTW.

Esto permite que los algoritmos se ajusten de forma din√°mica, dependiendo de la **complejidad del problema** (tama√±o de la instancia).

### üî¢ Tama√±os de instancia considerados

| Tama√±o del problema | N√∫mero de clientes (`vrp->num_clientes`) |
| ------------------- | ---------------------------------------- |
| **Peque√±a**         | `25`                                     |
| **Mediana**         | `50`                                     |
| **Grande**          | `100`                                    |

### üìê Rangos de Par√°metros por Tama√±o

#### üî∏ Instancia Peque√±a (`25 clientes`)

| Par√°metro                | M√≠nimo | M√°ximo |
| ------------------------ | ------ | ------ |
| `alpha`                  | 2.0    | 3.5    |
| `beta`                   | 2.5    | 4.0    |
| `gamma`                  | 2.5    | 1.0    |
| `rho`                    | 0.3    | 0.5    |
| `n√∫mero de hormigas`     | 6      | 6      |
| `porcentaje hormigas`    | 0.30   | 0.60   |
| `iteraciones ACO`        | 60     | 80     |
| `temperatura inicial`    | 1200.0 | 1800.0 |
| `temperatura final`      | 0.01   | 0.1    |
| `factor de enfriamiento` | 0.95   | 0.98   |
| `iteraciones SA`         | 80     | 120    |


#### üî∏ Instancia Mediana (`27‚Äì51 clientes`)

| Par√°metro                | M√≠nimo | M√°ximo |
| ------------------------ | ------ | ------ |
| `alpha`                  | 2.5    | 4.0    |
| `beta`                   | 3.5    | 5.0    |
| `gamma`                  | 1.5    | 3.0    |
| `rho`                    | 0.25   | 0.45   |
| `n√∫mero de hormigas`     | 6      | 12     |
| `porcentaje hormigas`    | 0.20   | 0.50   |
| `iteraciones ACO`        | 100    | 150    |
| `temperatura inicial`    | 1600.0 | 2200.0 |
| `temperatura final`      | 0.005  | 0.05   |
| `factor de enfriamiento` | 0.97   | 0.99   |
| `iteraciones SA`         | 120    | 200    |


#### üî∏ Instancia Grande (`52‚Äì101 clientes`)

| Par√°metro                | M√≠nimo | M√°ximo |
| ------------------------ | ------ | ------ |
| `alpha`                  | 3.0    | 5.0    |
| `beta`                   | 4.0    | 6.0    |
| `gamma`                  | 2.0    | 4.0    |
| `rho`                    | 0.10   | 0.30   |
| `n√∫mero de hormigas`     | 10     | 20     |
| `porcentaje hormigas`    | 0.15   | 0.35   |
| `iteraciones ACO`        | 120    | 180    |
| `temperatura inicial`    | 2500.0 | 4000.0 |
| `temperatura final`      | 0.001  | 0.01   |
| `factor de enfriamiento` | 0.97   | 0.995  |
| `iteraciones SA`         | 200    | 300    |


### üß† ¬øPor qu√© definir rangos diferentes?

Esto permite que el algoritmo DE explore soluciones **m√°s ajustadas al tama√±o del problema**, evitando usar configuraciones demasiado peque√±as para instancias grandes, o demasiado costosas para instancias peque√±as. As√≠ se logra un **balance entre calidad de la soluci√≥n y tiempo de c√≥mputo**.

---

## üîÅ Proceso de Optimizaci√≥n H√≠brida (DE + ACO + SA) para VRP

1. **Inicializaci√≥n con DE**:  
   Se genera aleatoriamente una poblaci√≥n inicial de posibles soluciones, donde cada individuo representa un conjunto de par√°metros para el algoritmo **ACO** (por ejemplo: Œ±, Œ≤, œÅ, n√∫mero de hormigas, n√∫mero de iteraciones, etc.).

2. **Evaluaci√≥n de Individuos**:  
   Cada conjunto de par√°metros se eval√∫a ejecutando el algoritmo **ACO** para resolver el **VRPTW**, construyendo rutas factibles que respetan la capacidad de los veh√≠culos y las ventanas de tiempo.

3. **Optimizaci√≥n Local**:  
   Despu√©s de que **ACO** genera una soluci√≥n (rutas), se aplica **Recocido Simulado (SA)** como optimizador local. Este paso consiste en realizar peque√±os ajustes en las rutas generadas por **ACO** para mejorar su calidad. **SA** se encarga de explorar soluciones vecinas a la actual (cercanas en el espacio de soluciones) para encontrar una mejor soluci√≥n local. Durante este proceso, **SA** acepta temporalmente soluciones peores con una probabilidad que disminuye gradualmente a medida que "enfr√≠a" su temperatura, permitiendo escapar de √≥ptimos locales.

4. **C√°lculo del Fitness**:  
   Se calcula la **distancia total recorrida por todos los veh√≠culos**. Este valor se utiliza como el **fitness** del individuo, penalizando soluciones que excedan la capacidad o que tengan veh√≠culos mal distribuidos.

5. **Evoluci√≥n con DE**:  
   El algoritmo **DE** utiliza los valores de fitness para evolucionar la poblaci√≥n, generando nuevos conjuntos de par√°metros con el objetivo de **minimizar la distancia total de la soluci√≥n del VRPTW**.

6. **Criterio de Paro**:  
   El proceso se repite durante un n√∫mero m√°ximo de generaciones.

Este proceso permite **optimizar autom√°ticamente** el rendimiento del algoritmo ACO (y SA), **evitando el ajuste manual** de par√°metros y encontrando de manera m√°s eficiente soluciones de alta calidad para el **Problema de Ruteo de Veh√≠culos con Ventanas de Tiempo (VRPTW)**.

---

## üöõ Gesti√≥n de Veh√≠culos, Capacidad y Tiempo

La principal diferencia con respecto al VRP cl√°sico es la incorporaci√≥n de:

- **Restricciones de capacidad**: Cada veh√≠culo tiene una capacidad m√°xima.
- **Demanda de clientes**: Cada cliente requiere cierta cantidad de producto.
- **Ventanas de tiempo**: Cada cliente debe ser visitado dentro de un intervalo de tiempo espec√≠fico.
- **Tiempo de servicio**: Cada cliente requiere un tiempo de servicio determinado.
- **Tiempos de viaje**: El tiempo necesario para viajar entre localizaciones.
- **Selecci√≥n greedy de veh√≠culos**: Cuando un veh√≠culo alcanza su capacidad m√°xima o no puede cumplir con las ventanas de tiempo restantes, se selecciona el siguiente veh√≠culo disponible.

El algoritmo construye las rutas considerando estas restricciones:

1. **Inicio en el dep√≥sito**: Comienza desde el dep√≥sito con tiempo inicial 0.

2. **Selecci√≥n del siguiente cliente**: Basada en una combinaci√≥n de **feromonas** (experiencia acumulada),**visibilidad** (inverso de la distancia) y **ventana tiempo** (inverso de la ventana final del cliente).

3. **Verificaci√≥n de capacidad**: Se comprueba si el veh√≠culo puede atender al cliente sin exceder su capacidad.

4. **Verificaci√≥n de la ventana de tiempo**: Se comprueba si el veh√≠culo puede llegar dentro del intervalo [a·µ¢, b·µ¢] definido para el cliente, donde:

   - **a·µ¢** es el tiempo m√°s temprano para comenzar el servicio, y

   - **b·µ¢** es el tiempo m√°s tard√≠o aceptado.

5. **Actualiza el tiempo de llegada**: Si el veh√≠culo llega antes de a·µ¢, deber√° esperar. Luego se actualiza el tiempo actual sumando el tiempo de espera y el tiempo de servicio del cliente.

6. **Regreso al dep√≥sito si no es posible atender**: Si no se puede visitar al cliente actual (por violar la capacidad o la ventana de tiempo), el veh√≠culo regresa al dep√≥sito, y se intenta asignar el cliente al siguiente veh√≠culo disponible.

7. **Continuaci√≥n del proceso**: El procedimiento se repite, seleccionando nuevos clientes factibles hasta que no queden m√°s clientes por atender.

8. **Cambio de veh√≠culo**: Si el cliente no puede ser atendido, el veh√≠culo regresa al dep√≥sito y se asigna el siguiente veh√≠culo disponible.

9. **Cobertura total**: El proceso contin√∫a hasta que todos los clientes han sido asignados a una ruta factible.

Este enfoque garantiza que todas las restricciones del problema sean respetadas, generando soluciones viables y eficientes para el VRPTW.

---

## üéØ Resultados Esperados

El objetivo principal de este proyecto es encontrar las mejores rutas para el **Problema de Rutas de Veh√≠culos con Ventanas de Tiempo (VRPTW)** mediante el uso combinado del algoritmo **ACO** y el algoritmo **DE** para optimizar los par√°metros.

### üîç ¬øQu√© se espera como salida?

. **Conjunto de rutas optimizadas**  
   Una soluci√≥n factible donde todos los clientes son atendidos, respetando las restricciones de capacidad, tiempo y con una distancia total m√≠nima.

2. **Distancia total recorrida**  
   Suma de las distancias de todas las rutas generadas por los veh√≠culos.

3. **Tiempo de ejecuci√≥n total**: El tiempo total que tom√≥ ejecutar el proceso de optimizaci√≥n y encontrar las mejores rutas.

3. **Utilizaci√≥n de veh√≠culos**: Cantidad de veh√≠culos utilizados y su nivel de ocupaci√≥n.

5. **Planificaci√≥n temporal**: Tiempos de llegada, espera y salida para cada cliente.

### üì¶ Resultados Generados

3. **Archivo JSON**

   - Se genera un archivo `.json` que contiene todos los par√°metros utilizados en la ejecuci√≥n, tales como:
     - Nombre del archivo de entrada
     - Tiempo de ejecuci√≥n en minutos
     - Poblacion y Generaciones
     - Œ± (alpha), Œ≤ (beta), Œ≥ (gamma), œÅ (rho) 
     - N√∫mero de hormigas
     - N√∫mero de iteraciones
     - T.ini, T.fin, Factor enfriamiento, Numero de iteraciones
     - Valor de fitness de la soluci√≥n
     - Flota:
       - ID_Vehiculo
       - Velocidad
       - Capacidad Maxima
       - Capacidad Acumulada
       - Tiempo Salida
       - Tiempo Llegada
       - Venta Inicial
       - Ventana Final
       - Numero Clientes
       - Fitness Vehiculo
       - Rutas generada(listas de clientes)
       - Rutas coordenadas(listas de coordenadas clientes)
       - Tiempos de clientes

4. **Imagen simulada**

   - Se genera una imagen est√°tica (`.png`) que representa visualmente las **rutas generadas** por el algoritmo ACO.
   - Las rutas de diferentes veh√≠culos se representan con colores distintos.
   - Incluye informaci√≥n sobre las ventanas de tiempo de cada cliente.

   Ejemplo de visualizaci√≥n:
   ![Imagen_VRPTW](Recursos_Readme/Ejemplo_png.png)

5. **GIF simulado**

   - Se crea un **GIF animado** que simula el proceso de construcci√≥n de las rutas en el tiempo, mostrando c√≥mo los veh√≠culos recorren los clientes respetando las ventanas de tiempo.

   Ejemplo de animaci√≥n:
   ![Simulacion VRPTW](Recursos_Readme/Ejemplo_gif.gif)

### üíæ Ejemplo de archivo JSON

El archivo `JSON` generado tendr√° la siguiente estructura:

```json
{
	"Archivo":	"C104_(25)",
	"Tiempo Ejecucion en Minutos":	2,
	"Poblacion":	3,
	"Generaciones":	5,
	"Alpha":	2.8141023790529474,
	"Beta":	3.8692335087662717,
	"Gamma":	1.247727090375371,
	"Rho":	0.477554173198321,
	"Numero Hormigas":	4,
	"Porcentaje Hormigas":	0.31966146059318512,
	"Numero Iteraciones ACO":	71,
	"Temperatura Inicial":	1783.5621627902437,
	"Temperatura Final":	0.01050384173193194,
	"Factor de Enfriamiento":	0.9645347308574872,
	"Numero Iteraciones SA":	105,
	"Fitness Global":	187.44945538505974,
	"Flota":	[{
			"Id_vehiculo":	1,
			"Capacidad Maxima":	200,
			"Capacidad Acumulada":	150,
			"Tiempo Salida":	0,
			"Tiempo Llegada":	1202.3438485013496,
			"Ventana Inicial":	0,
			"Ventana Final":	1236,
			"Numero Clientes":	10,
			"Fitness Vehiculo":	54.968966901432061,
			"Ruta Clientes":	[0, 7, 8, 11, 9, 6, 4, 2, 1, 3, 5, 0],
			"Ruta Coordenadas":	[{
					"X":	40,
					"Y":	50
				}, {
					"X":	40,
					"Y":	66
				}, {
					"X":	38,
					"Y":	68
				}, {
					"X":	35,
					"Y":	69
				}, {
					"X":	38,
					"Y":	70
				}, {
					"X":	40,
					"Y":	69
				}, {
					"X":	42,
					"Y":	68
				}, {
					"X":	45,
					"Y":	70
				}, {
					"X":	45,
					"Y":	68
				}, {
					"X":	42,
					"Y":	66
				}, {
					"X":	42,
					"Y":	65
				}, {
					"X":	40,
					"Y":	50
				}],
			"Detalles Cliente":	[{
					"Cliente":	"Dep√≥sito",
					"Demanda":	0,
					"Ventana Inicial":	0,
					"Ventana Final":	1236,
					"Llegada":	0,
					"Espera":	0,
					"Inicio Servicio":	0,
					"Duraci√≥n":	0,
					"Salida":	0
				}, {
					"Cliente":	7,
					"Demanda":	20,
					"Ventana Inicial":	0,
					"Ventana Final":	1130,
					"Llegada":	16,
					"Espera":	0,
					"Inicio Servicio":	16,
					"Duraci√≥n":	90,
					"Salida":	106
				}, {
					"Cliente":	8,
					"Demanda":	20,
					"Ventana Inicial":	255,
					"Ventana Final":	324,
					"Llegada":	108.82842712474618,
					"Espera":	146.17157287525382,
					"Inicio Servicio":	255,
					"Duraci√≥n":	90,
					"Salida":	345
				}, {
					"Cliente":	11,
					"Demanda":	10,
					"Ventana Inicial":	448,
					"Ventana Final":	505,
					"Llegada":	348.1622776601684,
					"Espera":	99.8377223398316,
					"Inicio Servicio":	448,
					"Duraci√≥n":	90,
					"Salida":	538
				}, {
					"Cliente":	9,
					"Demanda":	10,
					"Ventana Inicial":	534,
					"Ventana Final":	605,
					"Llegada":	541.16227766016834,
					"Espera":	0,
					"Inicio Servicio":	541.16227766016834,
					"Duraci√≥n":	90,
					"Salida":	631.16227766016834
				}, {
					"Cliente":	6,
					"Demanda":	20,
					"Ventana Inicial":	0,
					"Ventana Final":	1127,
					"Llegada":	633.39834563766817,
					"Espera":	0,
					"Inicio Servicio":	633.39834563766817,
					"Duraci√≥n":	90,
					"Salida":	723.39834563766817
				}, {
					"Cliente":	4,
					"Demanda":	10,
					"Ventana Inicial":	727,
					"Ventana Final":	782,
					"Llegada":	725.634413615168,
					"Espera":	1.3655863848319996,
					"Inicio Servicio":	727,
					"Duraci√≥n":	90,
					"Salida":	817
				}, {
					"Cliente":	2,
					"Demanda":	30,
					"Ventana Inicial":	0,
					"Ventana Final":	1125,
					"Llegada":	820.605551275464,
					"Espera":	0,
					"Inicio Servicio":	820.605551275464,
					"Duraci√≥n":	90,
					"Salida":	910.605551275464
				}, {
					"Cliente":	1,
					"Demanda":	10,
					"Ventana Inicial":	0,
					"Ventana Final":	1127,
					"Llegada":	912.605551275464,
					"Espera":	0,
					"Inicio Servicio":	912.605551275464,
					"Duraci√≥n":	90,
					"Salida":	1002.605551275464
				}, {
					"Cliente":	3,
					"Demanda":	10,
					"Ventana Inicial":	0,
					"Ventana Final":	1129,
					"Llegada":	1006.211102550928,
					"Espera":	0,
					"Inicio Servicio":	1006.211102550928,
					"Duraci√≥n":	90,
					"Salida":	1096.211102550928
				}, {
					"Cliente":	5,
					"Demanda":	10,
					"Ventana Inicial":	0,
					"Ventana Final":	1130,
					"Llegada":	1097.211102550928,
					"Espera":	0,
					"Inicio Servicio":	1097.211102550928,
					"Duraci√≥n":	90,
					"Salida":	1187.211102550928
				}, {
					"Cliente":	"Dep√≥sito",
					"Demanda":	0,
					"Ventana Inicial":	0,
					"Ventana Final":	1236,
					"Llegada":	1202.3438485013496,
					"Espera":	0,
					"Inicio Servicio":	1202.3438485013496,
					"Duraci√≥n":	0,
					"Salida":	1202.3438485013496
				}]
		}, {
			"Id_vehiculo":	2,
			"Capacidad Maxima":	200,
			"Capacidad Acumulada":	200,
			"Tiempo Salida":	0,
			"Tiempo Llegada":	906.0398087693228,
			"Ventana Inicial":	0,
			"Ventana Final":	1236,
			"Numero Clientes":	9,
			"Fitness Vehiculo":	96.039808769322832,
			"Ruta Clientes":	[0, 13, 17, 18, 19, 15, 16, 14, 12, 10, 0],
			"Ruta Coordenadas":	[{
					"X":	40,
					"Y":	50
				}, {
					"X":	22,
					"Y":	75
				}, {
					"X":	18,
					"Y":	75
				}, {
					"X":	15,
					"Y":	75
				}, {
					"X":	15,
					"Y":	80
				}, {
					"X":	20,
					"Y":	80
				}, {
					"X":	20,
					"Y":	85
				}, {
					"X":	22,
					"Y":	85
				}, {
					"X":	25,
					"Y":	85
				}, {
					"X":	35,
					"Y":	66
				}, {
					"X":	40,
					"Y":	50
				}],
			"Detalles Cliente":	[{
					"Cliente":	"Dep√≥sito",
					"Demanda":	0,
					"Ventana Inicial":	0,
					"Ventana Final":	1236,
					"Llegada":	0,
					"Espera":	0,
					"Inicio Servicio":	0,
					"Duraci√≥n":	0,
					"Salida":	0
				}, {
					"Cliente":	13,
					"Demanda":	30,
					"Ventana Inicial":	30,
					"Ventana Final":	92,
					"Llegada":	30.805843601498726,
					"Espera":	0,
					"Inicio Servicio":	30.805843601498726,
					"Duraci√≥n":	90,
					"Salida":	120.80584360149872
				}, {
					"Cliente":	17,
					"Demanda":	20,
					"Ventana Inicial":	0,
					"Ventana Final":	1112,
					"Llegada":	124.80584360149872,
					"Espera":	0,
					"Inicio Servicio":	124.80584360149872,
					"Duraci√≥n":	90,
					"Salida":	214.80584360149874
				}, {
					"Cliente":	18,
					"Demanda":	20,
					"Ventana Inicial":	0,
					"Ventana Final":	1110,
					"Llegada":	217.80584360149874,
					"Espera":	0,
					"Inicio Servicio":	217.80584360149874,
					"Duraci√≥n":	90,
					"Salida":	307.80584360149874
				}, {
					"Cliente":	19,
					"Demanda":	10,
					"Ventana Inicial":	0,
					"Ventana Final":	1106,
					"Llegada":	312.80584360149874,
					"Espera":	0,
					"Inicio Servicio":	312.80584360149874,
					"Duraci√≥n":	90,
					"Salida":	402.80584360149874
				}, {
					"Cliente":	15,
					"Demanda":	40,
					"Ventana Inicial":	384,
					"Ventana Final":	429,
					"Llegada":	407.80584360149874,
					"Espera":	0,
					"Inicio Servicio":	407.80584360149874,
					"Duraci√≥n":	90,
					"Salida":	497.80584360149874
				}, {
					"Cliente":	16,
					"Demanda":	40,
					"Ventana Inicial":	0,
					"Ventana Final":	1105,
					"Llegada":	502.80584360149874,
					"Espera":	0,
					"Inicio Servicio":	502.80584360149874,
					"Duraci√≥n":	90,
					"Salida":	592.80584360149874
				}, {
					"Cliente":	14,
					"Demanda":	10,
					"Ventana Inicial":	0,
					"Ventana Final":	1106,
					"Llegada":	594.80584360149874,
					"Espera":	0,
					"Inicio Servicio":	594.80584360149874,
					"Duraci√≥n":	90,
					"Salida":	684.80584360149874
				}, {
					"Cliente":	12,
					"Demanda":	20,
					"Ventana Inicial":	0,
					"Ventana Final":	1107,
					"Llegada":	687.80584360149874,
					"Espera":	0,
					"Inicio Servicio":	687.80584360149874,
					"Duraci√≥n":	90,
					"Salida":	777.80584360149874
				}, {
					"Cliente":	10,
					"Demanda":	10,
					"Ventana Inicial":	0,
					"Ventana Final":	1129,
					"Llegada":	799.27675415508259,
					"Espera":	0,
					"Inicio Servicio":	799.27675415508259,
					"Duraci√≥n":	90,
					"Salida":	889.27675415508259
				}, {
					"Cliente":	"Dep√≥sito",
					"Demanda":	0,
					"Ventana Inicial":	0,
					"Ventana Final":	1236,
					"Llegada":	906.0398087693228,
					"Espera":	0,
					"Inicio Servicio":	906.0398087693228,
					"Duraci√≥n":	0,
					"Salida":	906.0398087693228
				}]
		}, {
			"Id_vehiculo":	3,
			"Capacidad Maxima":	200,
			"Capacidad Acumulada":	110,
			"Tiempo Salida":	0,
			"Tiempo Llegada":	1017.1980390271856,
			"Ventana Inicial":	0,
			"Ventana Final":	1236,
			"Numero Clientes":	6,
			"Fitness Vehiculo":	36.440679714304849,
			"Ruta Clientes":	[0, 20, 24, 25, 23, 22, 21, 0],
			"Ruta Coordenadas":	[{
					"X":	40,
					"Y":	50
				}, {
					"X":	30,
					"Y":	50
				}, {
					"X":	25,
					"Y":	50
				}, {
					"X":	25,
					"Y":	52
				}, {
					"X":	28,
					"Y":	55
				}, {
					"X":	28,
					"Y":	52
				}, {
					"X":	30,
					"Y":	52
				}, {
					"X":	40,
					"Y":	50
				}],
			"Detalles Cliente":	[{
					"Cliente":	"Dep√≥sito",
					"Demanda":	0,
					"Ventana Inicial":	0,
					"Ventana Final":	1236,
					"Llegada":	0,
					"Espera":	0,
					"Inicio Servicio":	0,
					"Duraci√≥n":	0,
					"Salida":	0
				}, {
					"Cliente":	20,
					"Demanda":	10,
					"Ventana Inicial":	0,
					"Ventana Final":	1136,
					"Llegada":	10,
					"Espera":	0,
					"Inicio Servicio":	10,
					"Duraci√≥n":	90,
					"Salida":	100
				}, {
					"Cliente":	24,
					"Demanda":	10,
					"Ventana Inicial":	0,
					"Ventana Final":	1131,
					"Llegada":	105,
					"Espera":	0,
					"Inicio Servicio":	105,
					"Duraci√≥n":	90,
					"Salida":	195
				}, {
					"Cliente":	25,
					"Demanda":	40,
					"Ventana Inicial":	169,
					"Ventana Final":	224,
					"Llegada":	197,
					"Espera":	0,
					"Inicio Servicio":	197,
					"Duraci√≥n":	90,
					"Salida":	287
				}, {
					"Cliente":	23,
					"Demanda":	10,
					"Ventana Inicial":	732,
					"Ventana Final":	777,
					"Llegada":	291.24264068711926,
					"Espera":	440.75735931288074,
					"Inicio Servicio":	732,
					"Duraci√≥n":	90,
					"Salida":	822
				}, {
					"Cliente":	22,
					"Demanda":	20,
					"Ventana Inicial":	0,
					"Ventana Final":	1133,
					"Llegada":	825,
					"Espera":	0,
					"Inicio Servicio":	825,
					"Duraci√≥n":	90,
					"Salida":	915
				}, {
					"Cliente":	21,
					"Demanda":	20,
					"Ventana Inicial":	0,
					"Ventana Final":	1135,
					"Llegada":	917,
					"Espera":	0,
					"Inicio Servicio":	917,
					"Duraci√≥n":	90,
					"Salida":	1007
				}, {
					"Cliente":	"Dep√≥sito",
					"Demanda":	0,
					"Ventana Inicial":	0,
					"Ventana Final":	1236,
					"Llegada":	1017.1980390271856,
					"Espera":	0,
					"Inicio Servicio":	1017.1980390271856,
					"Duraci√≥n":	0,
					"Salida":	1017.1980390271856
				}]
		}]
}
```
---
## Requisitos

Para ejecutar este proyecto, aseg√∫rate de tener lo siguiente:

### üßë‚Äçüíª C Compiler

Es necesario tener un compilador de C instalado (como gcc) para compilar el c√≥digo fuente.

### Librer√≠a `cJSON`:

Este proyecto requiere la librer√≠a `cJSON` para trabajar con archivos JSON en C.  
 Puedes encontrarla y consultar c√≥mo instalarla en su repositorio oficial:

üëâ [https://github.com/DaveGamble/cJSON](https://github.com/DaveGamble/cJSON)

### üì¶ Python

Aseg√∫rate de tener Python instalado junto con las siguientes bibliotecas:

- json
- os
- sys
- matplotlib
- numpy

---
## Compilaci√≥n y Ejecuci√≥n

### 1. **Compilaci√≥n**

Para compilar el proyecto, usa el siguiente comando:

```bash
make
```

Este comando compilar√° el c√≥digo en modo release por defecto (optimizado). Si prefieres compilar en modo debug para facilitar la depuraci√≥n, puedes usar:

```bash
make debug
```

### 2. Ejecutar el Programa

Una vez compilado el proyecto, puedes ejecutar el ejecutable generado (llamado main) con los siguientes par√°metros:

```bash
./main <poblacion> <generaciones> <archivo> <numero_de_clientes>
```

Ejemplo:

```bash
./main 50 100 C101 25
```

- poblacion: el tama√±o de la poblaci√≥n para el algoritmo.
- generaciones: el n√∫mero de generaciones que el algoritmo debe ejecutar.
- archivo: el archivo de entrada.
- numero_de_clientes: el n√∫mero de clientes a considerar en el VRPTW.

### 3. Limpieza

Si deseas limpiar los archivos generados (archivos objeto, ejecutables, etc.), puedes usar:

```bash
make clean
```

---
## üìÅ Estructura del Proyecto

```bash
.
‚îú‚îÄ‚îÄ build/                     # Archivos objetos y dependencias generados por el compilador
‚îú‚îÄ‚îÄ include/                  # Archivos de cabecera (.h)
‚îÇ   ‚îú‚îÄ‚îÄ aed.h
‚îÇ   ‚îú‚îÄ‚îÄ configuracion_json.h
‚îÇ   ‚îú‚îÄ‚îÄ configuracion_vrp_tw.h  
‚îÇ   ‚îú‚îÄ‚îÄ control_memoria.h
‚îÇ   ‚îú‚îÄ‚îÄ estructuras.h
‚îÇ   ‚îú‚îÄ‚îÄ lista_flota.h
‚îÇ   ‚îú‚îÄ‚îÄ lista_ruta.h
‚îÇ   ‚îú‚îÄ‚îÄ movimientos_sa.h
‚îÇ   ‚îú‚îÄ‚îÄ salida_datos.h
‚îÇ   ‚îú‚îÄ‚îÄ vrp_tw_aco.h
‚îÇ   ‚îî‚îÄ‚îÄ vrp_tw_sa.h           
‚îú‚îÄ‚îÄ Instancias/               # Instancias CSV utilizadas en la ejecuci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ Instancias_25/
‚îÇ   ‚îú‚îÄ‚îÄ Instancias_50/
‚îÇ   ‚îî‚îÄ‚îÄ Instancias_100/
‚îú‚îÄ‚îÄ main                      # Ejecutable generado tras compilar
‚îú‚îÄ‚îÄ makefile                  # Makefile para compilar el proyecto
‚îú‚îÄ‚îÄ README.md                 # Archivo de documentaci√≥n
‚îú‚îÄ‚îÄ Resultados/               # Salidas generadas por la ejecuci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ Resultados_25/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Gifs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Imagenes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Json/
‚îÇ   ‚îú‚îÄ‚îÄ Resultados_50/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Gifs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Imagenes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Json/
‚îÇ   ‚îî‚îÄ‚îÄ Resultados_100/
‚îÇ       ‚îú‚îÄ‚îÄ Gifs/
‚îÇ       ‚îú‚îÄ‚îÄ Imagenes/
‚îÇ       ‚îî‚îÄ‚îÄ Json/
‚îú‚îÄ‚îÄ src/                      # C√≥digo fuente del proyecto en C y Python
‚îÇ   ‚îú‚îÄ‚îÄ aed.c
‚îÇ   ‚îú‚îÄ‚îÄ configuracion_json.c
‚îÇ   ‚îú‚îÄ‚îÄ configuracion_vrp_tw.c  
‚îÇ   ‚îú‚îÄ‚îÄ control_memoria.c
‚îÇ   ‚îú‚îÄ‚îÄ lista_flota.c
‚îÇ   ‚îú‚îÄ‚îÄ lista_ruta.c
‚îÇ   ‚îú‚îÄ‚îÄ main.c
‚îÇ   ‚îú‚îÄ‚îÄ movimientos_sa.c
‚îÇ   ‚îú‚îÄ‚îÄ salida_datos.c
‚îÇ   ‚îú‚îÄ‚îÄ vrp_tw_aco.c
‚îÇ   ‚îú‚îÄ‚îÄ vrp_tw_sa.c          
‚îÇ   ‚îî‚îÄ‚îÄ Simulador_VRP_TW/      
‚îÇ       ‚îî‚îÄ‚îÄ simulador_vrp_tw.py
‚îî‚îÄ‚îÄ VRP_Solomon/              # Instancias del benchmark Solomon para VRPTW
    ‚îú‚îÄ‚îÄ VRP_Solomon_25/
    ‚îÇ   ‚îú‚îÄ‚îÄ C101_(25).txt
    ‚îÇ   ‚îú‚îÄ‚îÄ C201_(25).txt
    ‚îÇ   ‚îú‚îÄ‚îÄ R101_(25).txt
    ‚îÇ   ‚îú‚îÄ‚îÄ R201_(25).txt
    ‚îÇ   ‚îú‚îÄ‚îÄ RC101_(25).txt
    ‚îÇ   ‚îî‚îÄ‚îÄ RC201_(25).txt
    ‚îú‚îÄ‚îÄ VRP_Solomon_50/
    ‚îÇ   ‚îú‚îÄ‚îÄ C101_(50).txt
    ‚îÇ   ‚îú‚îÄ‚îÄ C201_(50).txt
    ‚îÇ   ‚îú‚îÄ‚îÄ R101_(50).txt
    ‚îÇ   ‚îú‚îÄ‚îÄ R201_(50).txt
    ‚îÇ   ‚îú‚îÄ‚îÄ RC101_(50).txt
    ‚îÇ   ‚îî‚îÄ‚îÄ RC201_(50).txt
    ‚îî‚îÄ‚îÄ VRP_Solomon_100/
        ‚îú‚îÄ‚îÄ C101_(100).txt
        ‚îú‚îÄ‚îÄ C201_(100).txt
        ‚îú‚îÄ‚îÄ R101_(100).txt
        ‚îú‚îÄ‚îÄ R201_(100).txt
        ‚îî‚îÄ‚îÄ RC101_(100).txt
```
---
## ‚úÖ Consideraciones finales

Este trabajo busca contribuir al estudio y soluci√≥n del problema VRPTW mediante la implementaci√≥n de algoritmos bioinspirados. La principal diferencia respecto a la versi√≥n VRP cl√°sica es la incorporaci√≥n de restricciones de ventanas de tiempo, lo que a√±ade una capa de complejidad al problema y requiere una gesti√≥n temporal durante la construcci√≥n de las rutas. Se invita a la comunidad a explorar, reutilizar y mejorar el c√≥digo seg√∫n sus necesidades.

---
## üë• Contribuciones

- üßë‚Äçüè´ **Dr. Edwin Montes Orozco**  
  Director de PT y responsable del acompa√±amiento acad√©mico durante el desarrollo del proyecto.

- üë®‚Äçüíª **Alejandro Mart√≠nez Guzm√°n**  
  Autor del proyecto. Encargado del dise√±o, implementaci√≥n y documentaci√≥n del sistema de optimizaci√≥n.

- üß™ **Jaime L√≥pez Lara**  
  Ayudante en la ejecuci√≥n del c√≥digo y recolecci√≥n de resultados.

---
## üìù Licencia

Este proyecto est√° licenciado bajo los t√©rminos de la licencia MIT.  
Consulta el archivo [LICENSE](./LICENSE) para m√°s detalles.
